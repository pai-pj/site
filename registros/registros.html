<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" integrity="sha256-siyOpF/pBWUPgIcQi17TLBkjvNgNQArcmwJB8YvkAgg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
</head>


<body>
   
    

    
    <div class="mx-auto" style="width: 80vw;">
        
        <h2 class="text-center">Registro de Ações</h2>
        <h3 class="text-center">Preencha as informações ...  </h3>
   
        <form onsubmit="return enviaDados(event);">
            <div class="form-group">
            <label for="data"> Data </label>
            
            <div class="input-group date">
                <input type="text" class="form-control" required aria-required="true" placeholder="dd/mm/aaaa" id="data">
                <div class="input-group-append" style="cursor:pointer">
                    <span class="input-group-text" id="basic-addon2"><i class="fas fa-calendar"></i></span>
                </div>

            </div>

            </div>

            <div class="form-group">
            <label for="referencia">Referência</label>
            <select class="form-control selectpicker" required aria-required="true" id="referencia" data-live-search="true">
                <option value="" selected disabled>Selecione uma opção...</option>
                <option>Hanny</option>
                <option>Dudu</option>
            
            </select>
            </div>

            <div class="form-group">
                <label for="paciente">Paciente</label>
                <select class="form-control selectpicker" id="paciente" data-live-search="true" >
                    <option value="" selected></option>
                    <option>Nomes</option>
                    <option>Nomes</option>
                
                </select>
                </div>

                <div class="form-group">
                    <label for="acao">Ação</label>
                    <select class="form-control selectpicker" required aria-required="true" id="acao" data-live-search="true">
                        <option value="" selected disabled>Selecione uma opção...</option>
                        <option>Reunião</option>
                        <option>Contato</option>
                    
                    </select>
                    </div>


                    <div class="form-group">
                        <label for="equipe">Equipe</label>
                        <select class="form-control selectpicker" required aria-required="true" id="equipe" data-live-search="true">
                            <option value="" selected disabled>Selecione uma opção...</option>
                            <option>equipe</option>
                            <option>Contato</option>
                        
                        </select>
                        </div>
            
        
        
    

            <div class="form-group">
            <label for="descricao"> Descrição </label>
            <textarea class="form-control" id="descricao" rows="7"></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary">Salvar</button>

        </form>
        
    </div>





    

    <!-- Caixa de mensagens que aparece na confirmação -->
    <div class="modal fade" id="confirmacao" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content ">
            <div class="modal-header">
            <h5 class="modal-title" id="modalLabel">Confirmação</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
            
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" onclick="enviaDadosServidor()" data-dismiss="modal" class="btn btn-primary">Confirmar</button>
            </div>
        </div>
        </div>
    </div>

    
    
    
        <div id="mensagem" class="toast text-white" style="position: absolute; top: 0; right: 10vw;" >
    
            <div class="toast-header">
            <strong class="mr-auto">Aviso</strong>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="toast-body">
            Os dados foram salvos com sucesso!
            </div>
        </div>
    





<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-pt_BR.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha256-bqVeqGdJ7h/lYPq6xrPv/YGzMEb6dNxlfiTUHSgRCp8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.pt-BR.min.js" integrity="sha256-QN6KDU+9DIJ/9M0ynQQfw/O90ef0UXucGgKn0LbUtq4=" crossorigin="anonymous"></script>
<script>
    $('.input-group.date').datepicker({
    format: "dd/mm/yyyy",
    todayBtn: 'linked',
    language: "pt-BR",
    autoclose: true
    });
    function enviaDados(evt){
        exibeConfirmacao();
        evt.preventDefault();
        return false;
    }

    function exibeConfirmacao(){
        var htmlConfirmacao = "<h5>Confirma o envio dos dados conforme apresentado abaixo?</h5>";
        var listaCamposFormulário = getListaCamposPreenchidos();
        var htmlListaFormulario = "";
        for (campoFormulario of listaCamposFormulário){
            htmlListaFormulario += `<li class="text-truncate"><strong class="pr-2">${campoFormulario.titulo}:</strong>${campoFormulario.valor}</li>`
        }
        htmlListaFormulario = `<ul>${htmlListaFormulario}</ul>`;
        htmlConfirmacao = `${htmlConfirmacao}<br/><br/>${htmlListaFormulario}`;

        $('#confirmacao .modal-body').html(htmlConfirmacao);
        $('#confirmacao').modal();
    }

    function enviaDadosServidor(){
        //Envia dados para o servidor
        console.log(getListaCamposPreenchidos());
        
        apresentaMensagemResultado(true,"Sucesso!");
        
        //alert("Dados enviados");
    }

    function apresentaMensagemResultado(sucesso,mensagem)
    {
        if (sucesso){
            $("#mensagem").addClass('bg-success');
            $("#mensagem").removeClass('bg-danger');
        }else{
            $("#mensagem").addClass('bg-danger');
            $("#mensagem").removeClass('bg-success');
        }
        $("#mensagem .toast-body").text(mensagem);
        $('.toast').toast({delay:2000});
        $("#mensagem").toast('show');
    }

    function getListaCamposPreenchidos(){
        return [
            {
                titulo:"Data",
                valor: data.value
            },
            {
                titulo:"Referência",
                valor: referencia.value
            },
            {
                titulo:"Paciente",
                valor: paciente.value
            },
            {
                titulo:"Ação",
                valor: acao.value
            },
            {
                titulo:"Equipe",
                valor: equipe.value
            },
            {
                titulo:"Descrição",
                valor: descricao.value
            }
        ];
    }

</script>

</body>
</html>